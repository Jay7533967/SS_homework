
## 1-1-1：系統與 bash 資訊

### 系統與版本（以 Rocky Linux 為例）
```bash
cat /etc/os-release
uname -a
```

### bash 相關版本、檔案與路徑
```bash
bash --version
which bash
whereis bash
```

### bash 組態檔與文件
- `~/.bashrc`：非 login shell 組態
- `~/.bash_profile`：login shell 組態
- `/etc/bashrc`：全域非 login 組態
- `/etc/profile`：全域 login 組態
- `/usr/share/doc/bash*`：bash 說明文件

---

## 1-1-2：bash 與 sh 差異

| 比較項目       | bash                              | sh（Bourne Shell）            |
|----------------|------------------------------------|-------------------------------|
| 功能            | 功能完整（支援陣列、字串處理）     | 功能簡單                       |
| 相容性          | 向下相容 sh                         | 無法執行 bash 特有語法        |
| 常見位置        | `/bin/bash`                        | `/bin/sh`（常為 bash 的連結） |
| 指令提示支援    | 支援 command 補全                  | 基本或無補全                   |

---

## 1-1-3：file 指令判別檔案方式

- 根據 **magic number**（檔案前幾個位元組）進行比對
- 可辨識二進位、純文字、壓縮、圖片等格式

```bash
file /bin/ls
file myfile.txt
```

---

## 1-1-4：type 指令辨別內部或外部指令

- `type` 會回傳該命令是：
  - shell 內建
  - 別名（alias）
  - 函式（function）
  - 可執行檔（external）

```bash
type cd
type ls
type myfunc
```

---

## 1-1-5：Login shell 組態檔說明（如 ~/.bash_profile）

```bash
# ~/.bash_profile 範例
export PATH=$PATH:$HOME/bin
[[ -f ~/.bashrc ]] && source ~/.bashrc
```
- 設定環境變數
- 呼叫 ~/.bashrc 做進一步初始化

---

## 1-1-6：non-Login shell 組態檔（如 ~/.bashrc）

```bash
# ~/.bashrc 範例
alias ll='ls -l --color=auto'
export EDITOR=vim
```
- 設定常用 alias
- 設定互動環境變數

---

## 1-1-7：bash 登出後的系統行為

- 執行 `~/.bash_logout`（如清除 tmp）
- 關閉所有背景程序
- 結束 shell session

```bash
# ~/.bash_logout 範例
clear
```

---

## 1-1-8：set -o 三個功能與實作

| 功能         | 說明                     |
|--------------|--------------------------|
| `set -o noclobber` | 防止覆寫檔案         |
| `set -o errexit`   | 指令錯誤即中斷執行   |
| `set -o nounset`   | 使用未定義變數則錯誤 |

```bash
set -o noclobber
echo "test" > file.txt  # 若 file.txt 存在則報錯

set -o errexit
false; echo "will not run"

set -o nounset
echo $UNDEF_VAR  # 將產生錯誤
```

---

## 1-1-9：shopt -p 三個功能與實作

| 功能               | 說明                         |
|--------------------|------------------------------|
| `shopt -s histappend` | history 追加模式         |
| `shopt -s cdspell`    | 自動糾正 cd 指令拼錯      |
| `shopt -s dotglob`    | * 會包含 . 開頭檔案        |

```bash
shopt -s histappend
shopt -s cdspell
shopt -s dotglob
```

---

## 1-1-10：五個 env 環境變數與用途

| 變數     | 用途                             |
|----------|----------------------------------|
| `PATH`   | 指令搜尋路徑                     |
| `HOME`   | 使用者主目錄                     |
| `USER`   | 使用者名稱                       |
| `SHELL`  | 預設 shell 路徑                  |
| `LANG`   | 語系設定                         |

```bash
env | grep HOME
```

## 1-1-11：set 中的自訂變數與用途（5 個）

| 變數       | 用途                     | 範例設定                      |
|------------|--------------------------|-------------------------------|
| `EDITOR`   | 指定預設文字編輯器       | `EDITOR=vim`                  |
| `PS1`      | Shell 提示符樣式設定     | `PS1="\u@\h:\w\$ "`       |
| `MYNAME`   | 自訂變數，存放使用者名等 | `MYNAME="Alice"`              |
| `BACKUP_DIR` | 設定備份資料夾位置     | `BACKUP_DIR="/backup"`        |
| `TODAY`    | 儲存今日日期             | `TODAY=$(date +%F)`           |

```bash
set | grep MYNAME
```

---

## 1-1-12：$PATH 的順序與路徑涵義

- `$PATH` 為一組以冒號分隔的目錄列表，用來搜尋可執行檔。
- 順序影響 **執行指令時的搜尋優先順序**。
- 較前面的路徑具有 **較高優先權**。

```bash
echo $PATH
# /usr/local/bin:/usr/bin:/bin:/home/user/bin
```

---

## 1-1-13：bash 的升級方法（含舊版本處理）

### 使用套件管理更新（Rocky/RHEL）
```bash
bash --version
sudo dnf update bash
```

### 編譯安裝新版 bash
```bash
wget https://ftp.gnu.org/gnu/bash/bash-5.2.tar.gz
tar xvf bash-5.2.tar.gz
cd bash-5.2
./configure && make
sudo make install
```

備份舊版：
```bash
sudo cp /bin/bash /bin/bash.bak
```

---

## 1-1-14：printf 用法

```bash
printf "Hello %s, your score is %d.\n" "Tom" 85
# Hello Tom, your score is 85.

printf "%-10s %5.2f\n" "Price" 12.345
# Price      12.35
```

- `%s`：字串
- `%d`：整數
- `%f`：浮點數（小數）

---

## 1-1-15：IFS 與 Metacharacter

### IFS（Internal Field Separator）
```bash
IFS=:
names="Alice:Bob:Charlie"
for name in $names; do echo $name; done
```

### Metacharacters 常見字元

| 字元 | 意義         |
|------|--------------|
| `*`  | 任意字元     |
| `?`  | 任一字元     |
| `|`  | 管線         |
| `>`  | 輸出導向     |
| `$`  | 變數展開     |
| `&`  | 背景執行     |

---

## 1-1-16：CR（Carriage Return）

- `CR`：回車符號（`\r`），會將游標移至該行開頭。
- Windows 檔案使用 CRLF (`\r\n`)，Linux 使用 LF (`\n`)

```bash
printf "Hello\rWorld\n"
# 輸出為：World（Hello 被覆蓋）
```

---

## 1-1-17：正規表示式（Regular Expression）簡介

- 正規表示式是描述字串模式的語言。
- 常用於文字過濾與比對（grep, sed, awk）

```bash
echo "apple" | grep "a.*e"
# 符合以 a 開頭 e 結尾

grep "^[0-9]\{3\}$" file.txt
# 僅顯示完全為 3 位數字的行
```

---

## 1-1-18：變更 Shell 中文字顏色

```bash
echo -e "\e[31m紅色文字\e[0m"
echo -e "\e[32m綠色文字\e[0m"
```

| ANSI 色碼 | 顏色 |
|-----------|------|
| `31`      | 紅   |
| `32`      | 綠   |
| `33`      | 黃   |
| `34`      | 藍   |
| `0m`      | 重置顏色 |

---

## 1-1-19：bash 語系顯示與設定

```bash
locale          # 查看語系設定
export LANG=zh_TW.UTF-8   # 暫時修改語系
```

### 永久設定：
```bash
echo "LANG=zh_TW.UTF-8" >> ~/.bash_profile
source ~/.bash_profile
```

---

## 1-1-20：history 使用與範例

```bash
history          # 顯示歷史紀錄
!23              # 執行第 23 筆歷史指令
!!               # 執行上一筆指令
!ls              # 執行最後一次 ls 指令
```

### 調整歷史紀錄容量
```bash
export HISTSIZE=1000       # 記憶體中記錄 1000 筆
export HISTFILESIZE=5000   # 儲存在檔案中最多 5000 筆
```




## 1-1-11：set 中的自訂變數與用途（5 個）

| 變數       | 用途                     | 範例設定                      |
|------------|--------------------------|-------------------------------|
| `EDITOR`   | 指定預設文字編輯器       | `EDITOR=vim`                  |
| `PS1`      | Shell 提示符樣式設定     | `PS1="\u@\h:\w\$ "`       |
| `MYNAME`   | 自訂變數，存放使用者名等 | `MYNAME="Alice"`              |
| `BACKUP_DIR` | 設定備份資料夾位置     | `BACKUP_DIR="/backup"`        |
| `TODAY`    | 儲存今日日期             | `TODAY=$(date +%F)`           |

```bash
set | grep MYNAME
```

---

## 1-1-12：$PATH 的順序與路徑涵義

- `$PATH` 為一組以冒號分隔的目錄列表，用來搜尋可執行檔。
- 順序影響 **執行指令時的搜尋優先順序**。
- 較前面的路徑具有 **較高優先權**。

```bash
echo $PATH
# /usr/local/bin:/usr/bin:/bin:/home/user/bin
```

---

## 1-1-13：bash 的升級方法（含舊版本處理）

### 使用套件管理更新（Rocky/RHEL）
```bash
bash --version
sudo dnf update bash
```

### 編譯安裝新版 bash
```bash
wget https://ftp.gnu.org/gnu/bash/bash-5.2.tar.gz
tar xvf bash-5.2.tar.gz
cd bash-5.2
./configure && make
sudo make install
```

備份舊版：
```bash
sudo cp /bin/bash /bin/bash.bak
```

---

## 1-1-14：printf 用法

```bash
printf "Hello %s, your score is %d.\n" "Tom" 85
# Hello Tom, your score is 85.

printf "%-10s %5.2f\n" "Price" 12.345
# Price      12.35
```

- `%s`：字串
- `%d`：整數
- `%f`：浮點數（小數）

---

## 1-1-15：IFS 與 Metacharacter

### IFS（Internal Field Separator）
```bash
IFS=:
names="Alice:Bob:Charlie"
for name in $names; do echo $name; done
```

### Metacharacters 常見字元

| 字元 | 意義         |
|------|--------------|
| `*`  | 任意字元     |
| `?`  | 任一字元     |
| `|`  | 管線         |
| `>`  | 輸出導向     |
| `$`  | 變數展開     |
| `&`  | 背景執行     |

---

## 1-1-16：CR（Carriage Return）

- `CR`：回車符號（`\r`），會將游標移至該行開頭。
- Windows 檔案使用 CRLF (`\r\n`)，Linux 使用 LF (`\n`)

```bash
printf "Hello\rWorld\n"
# 輸出為：World（Hello 被覆蓋）
```

---

## 1-1-17：正規表示式（Regular Expression）簡介

- 正規表示式是描述字串模式的語言。
- 常用於文字過濾與比對（grep, sed, awk）

```bash
echo "apple" | grep "a.*e"
# 符合以 a 開頭 e 結尾

grep "^[0-9]\{3\}$" file.txt
# 僅顯示完全為 3 位數字的行
```

---

## 1-1-18：變更 Shell 中文字顏色

```bash
echo -e "\e[31m紅色文字\e[0m"
echo -e "\e[32m綠色文字\e[0m"
```

| ANSI 色碼 | 顏色 |
|-----------|------|
| `31`      | 紅   |
| `32`      | 綠   |
| `33`      | 黃   |
| `34`      | 藍   |
| `0m`      | 重置顏色 |

---

## 1-1-19：bash 語系顯示與設定

```bash
locale          # 查看語系設定
export LANG=zh_TW.UTF-8   # 暫時修改語系
```

### 永久設定：
```bash
echo "LANG=zh_TW.UTF-8" >> ~/.bash_profile
source ~/.bash_profile
```

---

## 1-1-20：history 使用與範例

```bash
history          # 顯示歷史紀錄
!23              # 執行第 23 筆歷史指令
!!               # 執行上一筆指令
!ls              # 執行最後一次 ls 指令
```

### 調整歷史紀錄容量
```bash
export HISTSIZE=1000       # 記憶體中記錄 1000 筆
export HISTFILESIZE=5000   # 儲存在檔案中最多 5000 筆
```
